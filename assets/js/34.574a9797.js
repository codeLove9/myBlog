(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{385:function(s,t,n){"use strict";n.r(t);var e=n(2),a=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("创建新的md文档时文档头一定要定义Frontmatter,要么就删除md文档；不能创建了md文档不写Frontmatter")])]),s._v(" "),t("h2",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),t("p",[s._v("我创建了一个新的test.md文档占坑时，准备以后补充内容，文档中什么都没写。")]),s._v(" "),t("p",[s._v("当我blog:dev启动项目时，点击Archieves模块查看自己的文档时，发现刚刚的test.md不见了，更离谱的是月份位置也错乱了。")]),s._v(" "),t("h2",{attrs:{id:"原因"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原因"}},[s._v("#")]),s._v(" 原因")]),s._v(" "),t("p",[s._v("于是我开始排查原因，在Archieves组件中我发现以下代码：")]),s._v(" "),t("div",{staticClass:"language-vue line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vue"}},[t("code",[s._v("computed: {\n  archiveList() {\n    let res = {};\n    let tmp = [];\n    let list = this.$site.pages.filter(item => {\n      // return item.pid === 'post' || item.pid === 'studyprogresshtmlcss';\n      return ~pidList.indexOf(item.pid)\n    });\n    list = list.sort((a,b) => {\n      let time1 = new Date(a.frontmatter.date);\n      let time2 = new Date(b.frontmatter.date);\n      return time2 - time1;\n    })\n    list.map(item => {\n      const date = new Date(item.frontmatter.date)\n      const year = date.getFullYear();\n      const month = date.getMonth();\n      const monthKey = DATE_MAP[month]\n      const day = `${date.getDate()}`;\n      res[year] || (res[year] = {});\n      res[year][monthKey] || (res[year][monthKey] = []);\n      item.date = `${`${month + 1}`.padStart(2, 0)}-${day.padStart(2, 0)}`;\n      res[year][monthKey].push(item);\n    })\n    for (let [key, item] of Object.entries(res)) {\n      tmp.push({\n        year: +key,\n        list: item\n      });\n    }\n    tmp.sort((a, b) => {\n      return b.year - a.year;\n    })\n    return tmp;\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br")])]),t("p",[s._v("可以看到，使用过list.frontmatter.date进行比较的，如果不给md文档写frontmatter，那取值就是undefined。")]),s._v(" "),t("p",[s._v("undefined和另外一个时间戳做减法，返回值自然就会导致错乱了。")])])}),[],!1,null,null,null);t.default=a.exports}}]);