(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{423:function(t,e,s){"use strict";s.r(e);var a=s(2),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),e("p",[t._v("今天在公司给老大做代码review时，因为没有测试异常情况，被老大批评了一顿，说再一再二不再三，我也该长长记性了")]),t._v(" "),e("p",[t._v("下面是大致的代码段：")]),t._v(" "),e("div",{staticClass:"language-vue line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-vue"}},[e("code",[t._v("async created() {\n  const [{ a }, b] = await Promise.all([getData().catch(e => ({})),getFinanceList()].catch(e => ''))\n}\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("当我沾沾自喜觉得自己写了优秀的代码，把两个请求用Promise.all统一处理还不忘做了捕获异常，信心满满的给老大看时")]),t._v(" "),e("p",[t._v("下面是他的原话：‘你考虑到两个请求发生异常的情况没？’ 我说：‘啊？好像没有’，顿时心里慌得一笔。")]),t._v(" "),e("p",[t._v("他于是批评道：‘"),e("strong",[t._v("那如果你第一个请求发生异常捕获了空对象，如果a拿不到值产生了typeError报错，导致页面卡死，你能负的起这个责吗？再一再二不再三啊，下次注意！")]),t._v("’")]),t._v(" "),e("p",[t._v("解决方案：")]),t._v(" "),e("p",[t._v("所以每次在捕获异常之后，要在浏览器调试工具中的控制台打印一下要取到的各个值，模拟一下异常情况会不会导致卡死，如下图所示")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://postimg.cc/NyzZ2nbP",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://i.postimg.cc/fLzspndZ/interface-Test.png",alt:"interface-Test.png"}}),e("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);